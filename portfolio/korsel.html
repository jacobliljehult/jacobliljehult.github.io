<!DOCTYPE html>
<html>

<head>
<style>
	* { font-family: Arial; color: #363d47; }
    main { background-color: #f2f6fc/* #fdfdfd;*/ }  
	h1 { text-align: center; margin: 0 0 0 0; }
  h2 { text-align: center; margin: 0 0 0 0; }
  h3 { text-align: center; margin: 0 0 0 0; }
  p { text-align: center; margin: 0; }
  .heading { }
  section { border: 1px solid #EAEAEB; border-radius: 5px; 
            background-color: #fdfdfd;
            margin: 10px auto; 
            padding: 20px 5px 20px 5px; 
            -webkit-box-shadow: -1px 5px 10px -1px rgba(218, 221, 228, 1.0); 
            box-shadow: -1px 5px 15px -1px rgba(218, 221, 228, 1.0);          
          }
  .btn { /*height: min(40px); */width: 90%; 
        border: 0px solid #EAEAEB;  
        margin: 0px auto; border-radius: 8px;
		    overflow: hidden;
        float: center; color: #363d47; 
        background-color: rgb(226, 226, 226);
        -webkit-box-shadow: -1px 2px 5px -1px rgba(251, 251, 251, 0.3); 
        box-shadow: -1px 2px 5px -1px rgba(124, 124, 124, 0.299);
      }
  .btn:hover { background-color: #43b6ab2e; }
  .btn label { line-height: 26px; 
        float: center; font-size: 24px; 
        
    }
  .btn input:checked + span { 
        background-color: #0061f2;
        background-image: linear-gradient(135deg,
          #0061f2 0%,rgba(105,0,199,0.8) 100%);
        color: white; 
        border: 0px solid #0061f2; 
        
      }
  .btn label span {
        text-align: center;
        padding: 20px 50px;
        display: block; 
        }
  .btn label input {
        position: absolute;
        display: none;
        color: #363d47 !important;
        }
  .btn label input + span {color: black;}

  button { height: 40px; width: 90%; margin: auto; 
           border-radius: 5px; 
           background-color: #505050; color: white; 
           font-size: 30px; display: none; }
  .panel { height: 40px; width: 90%; 
           border-radius: 4px; margin: auto;
           text-align: center; 
           font-size: 24px; }
  .panel span { padding: 8px 0;
            display: block; }

/*
  .riskPlaceholder {  }
*/          
  
  .riskNone { display: block; background-color: #fff; color: gray;
            border: 1px solid gray;}
  .riskLow { display: block; background-color: rgb(173, 255, 47); 
            border: 1px solid green;
            /*-webkit-box-shadow: -1px 2px 5px -1px green; 
            box-shadow: -1px 2px 5px -1px green;*/}
  .riskMedium { display: block; background-color: yellow; 
            border: 1px solid orange;
            /*-webkit-box-shadow: -1px 2px 5px -1px orange; 
            box-shadow: -1px 2px 10px -1px orange;*/}
  .riskHigh { display: block; background-color: pink; 
            border: 1px solid red;
            /*-webkit-box-shadow: -1px 2px 5px -1px red; 
            box-shadow: -1px 2px 10px -1px red;*/}
  #btnRisk { display: none; height: 0; }
  
  #afibtreat { display: none; }
  #stenosistreat { display: none; }

  .conclusion { width: 90%; border-radius: 10px; 
                text-align: center; font-size: 24px; 
                margin: 0 auto 20px auto;
                padding: 10px;}
	.conclusion span { padding: 8px 0;
  display: block; }
  .conclusion p { font-size: 10px; float: bottom; }
  #btnConcl { display: block; }
  #conclPlaceholder { display: block; 
            border: 1px solid gray;}
  
  .drivePlaceholder { display: block; background-color: #fff; 
            color: gray;
            border: 1px solid gray;}
  .driveNone { display: none; background-color: greenyellow; 
            border: 1px solid green; color: black;}
  .drive3mdr { display: none; background-color: pink; 
            border: 1px solid red; color: black}
  .drive6mdr { display: none; background-color: pink; 
            border: 1px solid red;}
  

  @media (orientation: portrait){
    main { width: 100%; border-radius: 3vw; 
            padding-top: 1vw;}
    h1 { font-size: 10vw; }
    h2 { font-size: 8vw; }
    h3 { font-size: 4vw; }
    p { font-size: 4vw; }
    .heading { margin: 5vw 2vw 3vw 2vw; }
    section { margin: 2vw 2vw 4vw 2vw;
              padding: 3vw 1vw 3vw 1vw;   
              border-radius: 3vw;}
    .btn { /*min-height: 3vh;*/ margin: 2.5vw auto;
            border-radius: 3vw; padding: 0;
            }
    
    .btn label { font-size: 4vw; ; 
      }
    .btn label span { padding: 3.5vw 0vw; font-size: 4vw; 
                      border-radius: 3vw; }
    .panel { height: 12vw; width: 90%; padding-top: 4vw; 
           font-size: 5vw; border-radius: 3vw;}
    .conclusion { border-radius: 3vw; 
                font-size: 7vw; 
                margin: 0 auto 20px auto;
                padding: 10px;}
	  .conclusion span { padding: 8px 0; display: block; }
    .conclusion p { font-size: 4vw; float: bottom; }
  }
  @media (orientation: landscape){
    * {font-size: 100%;}
    main { width: min(33%, 300px); margin: auto; 
          /*display: grid; grid-template-columns: auto auto;*/}
          h1 { font-size: 2em; }
    h2 { font-size: 0.8em; }
    h3 { font-size: 4em; }
    p { font-size: 4em; }
    .heading { margin: 5em 2em 3em 2em; }
    section { margin: 2em 2em 4em 2em;
              padding: 3em 1em 3em 1em;   
              border-radius: 3em;}
    .btn { /*min-height: 3vh;*/ margin: 2.5vw auto;
            border-radius: 3vw; padding: 0;
            }
    
    .btn label { font-size: 4vw; ; 
      }
    .btn label span { padding: 3.5vw 0vw; font-size: 4vw; 
                      border-radius: 3vw; }
    .panel { height: 12vw; width: 90%; padding-top: 4vw; 
           font-size: 5vw; border-radius: 3vw;}
    .conclusion { border-radius: 3vw; 
                font-size: 7vw; 
                margin: 0 auto 20px auto;
                padding: 10px;}
	  .conclusion span { padding: 8px 0; display: block; }
    .conclusion p { font-size: 4vw; float: bottom; }
  }
  
</style>
<script>
  function evalRisk(){
  	let age = 0;
  	if( document.getElementById('age').checked == true ){ 
      age = 2 } else { age = 0 };
    let hypertension = 0;
  	if( document.getElementById('hypertension').checked == true ){ 
      hypertension = 1 } else { hypertension = 0 };
  	let ihd = 0;
  	if( document.getElementById('ihd').checked == true ){ 
      ihd = 1 } else { ihd = 0 };
  	let prevstroke = 0;
  	if( document.getElementById('prevstroke').checked == true ){ 
      prevstroke = 3 } else { prevstroke = 0 };
  	let diabetes = 0;
  	if( document.getElementById('diabetes').checked == true ){ 
      diabetes = 3 } else { diabetes = 0 };
  	let insufficient = 0;
  	if( document.getElementById('insufficient').checked == true ){ 
      insufficient = 3 } else { insufficient = 0 };
    let currentStroke = parseFloat(document.forms[1].persist.value);
    /*document.form[1].persist.value;*/
    
    let riskScore = age + hypertension + ihd + prevstroke + 
                    diabetes + insufficient + currentStroke; 
    window.riskScore = riskScore;                
    /*document.getElementById('prompt').innerHTML = riskScore;*/
    /*document.getElementById('btnRisk').innerHTML = "Revurder";*/
    /*document.getElementById('riskLow').style.display = "block";*/

    switch(riskScore){
      case 0: case 1: case 2: case 3:  
      document.getElementById('riskPanel').innerHTML = "<span>Lav risiko for nyt stroke</span>";
      document.getElementById('riskPanel').className = "panel riskLow";
      break;
      case 4: case 5: case 6: case 7:  
      document.getElementById('riskPanel').innerHTML = "<span>Middel risiko for nyt stroke</span>";
      document.getElementById('riskPanel').className = "panel riskMedium";
      break;
      case 8: case 9: case 10: case 11: case 12: case 13:  
      document.getElementById('riskPanel').innerHTML = "<span>Høj risiko for nyt stroke</span>";
      document.getElementById('riskPanel').className = "panel riskHigh";
      break;
    }

    /*
    if(riskScore <= 3){ 
      document.getElementById('riskLow').style.display = "block";
      document.getElementById('riskMedium').style.display = "none";
      document.getElementById('riskHigh').style.display = "none";
      document.getElementById('riskNone').style.display = "none";
     } else if(riskScore > 3 & riskScore < 8){
      document.getElementById('riskLow').style.display = "none";
      document.getElementById('riskMedium').style.display = "block";
      document.getElementById('riskHigh').style.display = "none";
      document.getElementById('riskNone').style.display = "none";
     } else if(riskScore > 7){
      document.getElementById('riskLow').style.display = "none";
      document.getElementById('riskMedium').style.display = "none";
      document.getElementById('riskHigh').style.display = "block";
      document.getElementById('riskNone').style.display = "none";
     }
*/
  }
  
  function stenosistreat(ekg){
    	document.getElementById('stenosistreat').style.display = "block";
    }

	function afibtreat(ekg){
    	document.getElementById('afibtreat').style.display = "block";
    }
	
  function conclude(){
    /* - riskScore er en global score variabel - */
    /* - currentStroke - */
    let currentStroke = 0;
      if( document.getElementById('minor').checked == true ){ 
        currentStroke = 1 } else 
      if( document.getElementById('major').checked == true ){ 
        currentStroke = 2 };
    /* - stenosis - */
    let stenose = document.forms[3].stenosis.value; /* 0,1,2,9 */ 
    /* - afib - */
    let afib = document.forms[4].ekg.value; /* 0,1,9 */
    /* - stenosisTreat - */  
    let stenosisTreat = document.forms[3].stenosisTreat.value || 9;
    /* - afibTreat - */
    let afibTreat = document.forms[4].afib.value || 9;
    /* - persist - */
    let persist = 0;
      if( document.getElementById('parese').checked == true |
          document.getElementById('hemianopsi').checked == true |
          document.getElementById('cognitive').checked == true  
          ){ persist = 1 }

    let concludeCat = 0;   /* 0,3,6,7,8 */
        if( riskScore <= 3 & 
            currentStroke < 2 & 
            stenose < 2 &
            stenosisTreat == 9 & 
            afib == 0 &
            afibTreat == 9 &
            persist == 0 ){concludeCat = 0} else
        if( riskScore <= 3 & 
            currentStroke < 2 & 
            stenose < 2 &
            stenosisTreat == 9 & 
            afib == 1 &
            afibTreat == 9 &
            persist == 0 ){concludeCat = 3} else
        if( riskScore <= 3 & 
            currentStroke < 2 & 
            stenosisTreat == 9 & 
            afibTreat == 9 &
            persist == 0 & 
            (stenose == 9 | afib == 9) ){concludeCat = 3} else
        if( riskScore <= 3 & 
            currentStroke == 2 & 
            stenose < 2 &
            stenosisTreat == 9 & 
            afibTreat == 9 &
            afib == 0 &
            persist == 0 ){concludeCat = 3} else
        if( riskScore <= 3 & 
            currentStroke < 2 & 
            stenose < 2 &
            stenosisTreat == 9 & 
            afib == 1 &
            afibTreat == 0 &
            persist == 0 ){concludeCat = 3} else
        if( (riskScore >= 4 & riskScore <= 7) & 
            currentStroke < 2 & 
            stenose < 2 &
            stenosisTreat == 9 & 
            afibTreat == 9 &
            afib == 0 &
            persist == 0 ){concludeCat = 3} else
        if( (riskScore >= 4 & riskScore <= 7) & 
            currentStroke == 2 & 
            stenose < 2 &
            stenosisTreat == 9 & 
            afibTreat == 9 &
            afib == 0 &
            persist == 0){concludeCat = 6} else
        if( riskScore >= 0 & 
            currentStroke <= 2 & 
            stenose <= 2 &
            stenosisTreat >= 0 & 
            afibTreat >= 0 &
            afib >= 0 &
            persist == 1 ){concludeCat = 8} else
        if( riskScore >= 8 & 
            currentStroke <= 2 & 
            stenose <= 2 &
            stenosisTreat == 9 & 
            afibTreat == 9 &
            afib == 0 &
            persist == 0 ){concludeCat = 6} else
        if( riskScore >= 0 & 
            currentStroke <= 2 & 
            stenose <= 2 &
            stenosisTreat == 1 & 
            afibTreat >= 0 &
            afib >= 0 &
            persist >= 0 ){concludeCat = 6} else
        if( riskScore >= 0 & 
            currentStroke <= 2 & 
            stenose <= 2 &
            stenosisTreat != 0 & 
            afibTreat == 1 &
            afib == 1 &
            persist >= 0 ){concludeCat = 6} else
        if( riskScore >= 0 & 
            currentStroke <= 2 & 
            stenose == 2 &
            stenosisTreat == 0 & 
            afibTreat >= 0 &
            afib >= 0 &
            persist >= 0 ){concludeCat = 7}; 
        
        switch(concludeCat){
          case 0:
          document.getElementById('conclPlaceholder').innerHTML = 
          "<span>Kørsel tilladt</span><p>Tryk igen for revurdering</p>"
          document.getElementById('conclPlaceholder').className = "conclusion driveNone"
          break;
          case 3:
          document.getElementById('conclPlaceholder').innerHTML = 
          "<span>Kørselsforbud i 3 måneder</span><p>Tryk igen for revurdering</p>"
          document.getElementById('conclPlaceholder').className = "conclusion drive3mdr"
          break;  
          case 6:
          document.getElementById('conclPlaceholder').innerHTML = 
          "<span>Kørselsforbud i 6 måneder<br>Revurderes af neurolog før kørsel kan genoptages</span><p>Tryk igen for revurdering</p>"
          document.getElementById('conclPlaceholder').className = "conclusion drive6mdr"
          break;
          case 7:
          document.getElementById('conclPlaceholder').innerHTML = 
          "<span>Kørselsforbud i mindst 3 måneder<br>Efter carotisendarterektomi er der kørselsforbud i 1 måned</span><p>Tryk igen for revurdering</p>"
          document.getElementById('conclPlaceholder').className = "conclusion drive6mdr"
          break;
          case 8:
          document.getElementById('conclPlaceholder').innerHTML = 
          "<span>Ved ved varende symptomer er der kørselsforbud indtil disse er tilstrækkeligt rehabiliterede, ofte 3-6 måneder.<br>Dette forudsætter yderligere at patienten er i relevant profylaktisk behandling</span><p>Tryk igen for revurdering</p>"
          document.getElementById('conclPlaceholder').className = "conclusion drive6mdr"
          break;
        } ;

        /* debug prompt2 
        document.getElementById('prompt2').innerHTML = 
          "<p style='font-size: 15vw;'>" + afib + afibTreat + "</span>";
          */    
          }
</script>
</head>
  <body>
    <div class="heading">
      <h1>Kørselsforbud</h1>
    </div>
    
    <main>
      <!-- Risikofaktorer -->
<section>
  <div>	  
      <h2>Risikofaktorer</h2>
      <p>Vælg alle relevant</p>
    <form id="form0">
	    <div class="btn"><label>
    	  <input type="checkbox" id="age" value="2">  
        <span>Alder 70 eller over [2 point]</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="checkbox" id="hypertension" value="1">  
        <span>Hypertension (BT &gt;140/90 mmHg) [1 point]</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="checkbox" id="ihd" value="1">  
        <span>Iskæmisk hjertesygdom [1 point]</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="checkbox" id="prevstroke" value="3">  
        <span>Tidligere apopleksi [3 point]</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="checkbox" id="diabetes" value="3">  
        <span>Diabetes [3 point]</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="checkbox" id="insufficient" value="3">  
        <span>Erkendt hjerteinsufficiens [3 point]</span>
        </label>
      </div>
   </form>
</section>  
   <!-- Symptomvarighed -->
<section>
    <h2>Symptomvarighed</h2>
    <p>Vælg kun en</p>
  <form id="form1">
      <div class="btn"><label>
    	  <input type="radio" id="tia" name="persist" value="0" checked>  
        <span>Remitteret indenfor 24 timer [0 point]</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="radio" id="minor" name="persist" value="2">  
        <span>Remitteret indenfor en uge [2 point]</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="radio" id="major" name="persist" value="2">  
        <span>Fortsat symptomer efter en uge [2 point]</span>
        </label>
      </div>
    </form>
    
  <button id="btnRisk" onClick="evalRisk()">Beregn risiko</button>
   
   <!--  -->
   <div id="prompt"></div>
   <div class="panel riskNone" id="riskPanel" onClick="evalRisk()"><span>Tryk her for risikovurdering</span></div>
   
   
    <!--  
      <div class="panel riskPlaceholder" id="riskPlaceholder" 
        onClick="evalRisk()">
      <span>Tryk her for risikovurdering</span>
  </div> -->

</section>
   
   <!-- Fortsatte symptomer -->
<section>
    <h2>Fortsatte symptomer</h2>
    <p>Vælg alle der vil kunne påvirke patientens<br>evne til at køre bil</p>
  <div>
  <form id="form2">
  
    <div class="btn"><label>
    	<input type="checkbox" id="parese" value="1">  
      <span>Lammelse i arm eller ben</span>
      </label>
    </div>
    <div class="btn"><label>
    	<input type="checkbox" id="hemianopsi" value="1">  
      <span>Hemianopsi</span>
      </label>
    </div>
    <div class="btn btn-lrg"><label>
    	<input type="checkbox" id="cognitive" value="1">  
      <span>Kognitive vanskeligheder</span>
      </label>
    </div>
  </form>
  </div>
</section>
  <!-- Carotis stenose -->
<section>
  <h2>Carotis stenose</h2>
  <p>Vælg kun en</p>
  <div>
    <form id="form3">
      <div class="btn"><label>
    	  <input type="radio" name="stenosis" value="0">  
        <span>Ingen stenose</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="radio" name="stenosis" value="1">
        <span>Stenose &lt;50%</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="radio" name="stenosis" value="2"  
            onclick="stenosistreat(this)">
        <span>Stenose &gt;50%</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="radio" name="stenosis" value="9" checked>
        <span>Ikke undersøgt</span>
        </label>
      </div>
 
      <div id="stenosistreat">
        <h3>Er der et behandlingstilbud</h3>
        <div class="btn"><label>
    	    <input type="radio" name="stenosisTreat" value="0">
          <span>Patienten skal opereres</span>
          </label>
        </div>
        <div class="btn"><label>
          <input type="radio" name="stenosisTreat" value="1">
          <span>Der er ikke noget behandlingstilbud</span>
          </label>
        </div>
      </div>
    </form>
  </div>    
</section>
  <!-- EKG/Atrieflimmer -->
<section>
  <h2>EKG</h2>
  <p>Vælg kun en</p>
  <div>
    <form id="form4">
      <div class="btn"><label>
    	  <input type="radio" name="ekg" value="0">	
        <span>Normal rytme</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="radio" name="ekg" value="1" 
            onclick="afibtreat(this)">	
        <span>Atrieflimmer</span>
        </label>
      </div>
      <div class="btn"><label>
    	  <input type="radio" name="ekg" value="9" checked>	
        <span>Ikke undersøgt</span>
        </label>
      </div>
  	
      <div id="afibtreat">
      <h3>Er der et behandlingstilbud</h3>
        <div class="btn"><label>
    	    <input type="radio" name="afib" value="0">
          <span>Patienten er opstartet<br><br>AK eller NOAK behandling</span>
          </label>
        </div>
        <div class="btn"><label>
          <input type="radio" name="afib" value="1">
          <span>Der er ikke noget behandlingstilbud</span>
          </label>
        </div>
      </div>
	  </form>
  </div>
</section>

  <!-- Konklusion -->
<section>
  <h2>Konklusion</h2>
  
  <div class="conclusion drivePlaceholder" id="conclPlaceholder" 
        onClick="evalRisk();conclude()">
    <span>Tryk her for resultat</span>
  </div>
  
  <!--
  <button class="" id="btnConcl" onClick="conclude()">
    Tryk her for konklusion</button>-->
  <div id="prompt2"></div>  
  <!-- Placeholder for dato felt
  <label>Dato for symptom debut</label><br>
  <input type="date" name="dateDebut"></input><br><br>
   -->
</div>

</section>  
<br>
    </main>
  </body>
</html>
